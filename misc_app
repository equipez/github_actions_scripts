#!/bin/bash
# This script installs miscellaneous applications for GitHub Actions on ***hosted runners***.
# Usage: bash mist_setup

# Exist if the runner is not hosted. Is there a better way to decide the runner type?
if [[ ("$RUNNER_OS" == "Linux" && ! -d /home/runner/work/) || ("$RUNNER_OS" == "macOS" && ! -d /Users/runner/work/) ]] ; then
    printf "\nThe runner is not hosted by GitHub.\n"
    exit 0
fi

if [[ "$RUNNER_OS" == "Linux" ]] ; then
    sudo apt update
    sudo apt install gdb cmake ninja-build
    gdb --version
    cmake --version
elif [[ "$RUNNER_OS" == "macOS" ]] ; then
    brew install coreutils gdb cmake ninja
    gbd --version
    cmake --version
    ninja --version
elif [[ "$RUNNER_OS" == "Windows" ]] ; then
    choco install wget cmake ninja --no-progress
    gbd --version
    cmake --version
    ninja --version
fi
